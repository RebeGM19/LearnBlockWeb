<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='Styles/styles.css') }}">

    <script src="{{ url_for('static', filename='Scripts/scripts.js') }}"></script>
    <script src="{{ url_for('static', filename='Scripts/Blocks/workspace.js') }}"></script>
    <script src="{{ url_for('static', filename='Scripts/Blocks/blocks.js') }}"></script>
    <script src="{{ url_for('static', filename='Scripts/code.js') }}"></script>

</head>

<body>

    <table class="table" id="mainstructure">
        <tr>
            <td>
                <h1 id="sup"></h1>
                <p>{{ blocktext }}</p>
                <div class="row mb-5">
                    <button type="button" onclick="alert('Crear nuevo bloque')" class="lang" key="bCreateBlock" id="newblock"></button>
                    <select id="languageMenu"></select>
                </div>

            </td>
        </tr>



        <tr>
            <table class="table table-bordered" id="innertable">

                <tr>
                    <ul class="nav nav-tabs">
                        <li><button type="button" href="#python" data-toggle="tab">Python</button></li>
                        <li><button type="button" href="#blocktext" data-toggle="tab">Block-Text</button></li>
                        <li><button type="button" href="#learnblock" data-toggle="tab">LearnBlock</button></li>
                        <li id="sepButtons"></li>
                        <li><button type="button" onclick="execute()" id="execute"></button></li>
                    </ul>
                </tr>


                <tr>
                    <div class="tab-content" id="content_area">

                        <div class="tab-pane" id="python">
                            <textarea readonly id="resultpython"></textarea>
                        </div>

                        <div class="tab-pane" id="blocktext">
                           <textarea readonly id="resultblocktext"></textarea>
                        </div>

                        <div class="tab-pane active" id="learnblock">
                            <div id="learnblockDiv"></div>
                            <div id="toolbox" style="display: none">

                                <category name="%{BKY_CONTROL}" expanded="true">
                                    <block type="control_main"></block>
                                    <block type="control_if"></block>
                                    <block type="control_elif"></block>
                                    <block type="control_else"></block>
                                    <block type="control_while"></block>
                                    <block type="control_while_True"></block>
                                    <block type="control_elapsedTime_0"></block>
                                    <block type="control_elapsedTime_1"></block>
                                    <block type="fcontrol_sleep"></block>
                                </category>

                                <category name="%{BKY_OPERATORS}">
                                    <block type="operator_+"></block>
                                    <block type="operator_-"></block>
                                    <block type="operator_*"></block>
                                    <block type="operator_/"></block>
                                    <block type="operator_="></block>
                                    <block type="operator_=="></block>
                                    <block type="operator_+="></block>
                                    <block type="operator_-="></block>
                                    <block type="operator_*="></block>
                                    <block type="operator_/="></block>
                                    <block type="operator_True"></block>
                                    <block type="operator_False"></block>
                                    <block type="operator_<"></block>
                                    <block type="operator_>"></block>
                                    <block type="operator_and"></block>
                                    <block type="operator_or"></block>
                                    <block type="operator_not"></block>
                                    <block type="operator_)"></block>
                                    <block type="operator_("></block>
                                </category>

                                <category name="%{BKY_VALUES}">
                                    <block type="val_num1"></block>
                                    <block type="val_num2"></block>
                                    <block type="val_text1"></block>
                                    <block type="val_text2"></block>
                                </category>

                                <category name="%{BKY_VARIABLES}" custom="VARIABLE_DYNAMIC"></category>

                                <category name="%{BKY_FUNCTIONS}" custom="PROCEDURE"></category>

                                <category name="%{BKY_EMOTIONS}">
                                    <block type="emotion_expressNeutral"></block>
                                    <block type="emotion_expressJoy"></block>
                                    <block type="emotion_expressFear"></block>
                                    <block type="emotion_expressSadness"></block>
                                    <block type="emotion_expressAnger"></block>
                                    <block type="emotion_expressDisgust"></block>
                                    <block type="emotion_expressSurprise"></block>
                                    <block type="emotion_is_Neutral_0"></block>
                                    <block type="emotion_is_Neutral_1"></block>
                                    <block type="emotion_is_Joy_0"></block>
                                    <block type="emotion_is_Joy_1"></block>
                                    <block type="emotion_is_Scared_0"></block>
                                    <block type="emotion_is_Scared_1"></block>
                                    <block type="emotion_is_Sadness_0"></block>
                                    <block type="emotion_is_Sadness_1"></block>
                                    <block type="emotion_is_Angry_0"></block>
                                    <block type="emotion_is_Angry_1"></block>
                                    <block type="emotion_is_Disgust_0"></block>
                                    <block type="emotion_is_Disgust_1"></block>
                                    <block type="emotion_is_Surprised_0"></block>
                                    <block type="emotion_is_Surprised_1"></block>
                                </category>

                                <category name="%{BKY_SPEAKER}">
                                    <block type="speaker_say_Text"></block>
                                </category>

                                <category name="%{BKY_BASE}">
                                    <block type="base_slow_down"></block>
                                    <block type="base_turn_right"></block>
                                    <block type="base_turn_left"></block>
                                    <block type="base_turn_back"></block>
                                    <block type="base_turn"></block>
                                    <block type="base_set_orientation"></block>
                                    <block type="base_reset_orientation"></block>
                                    <block type="base_stop_bot"></block>
                                    <block type="base_set_move"></block>
                                    <block type="base_move_straight"></block>
                                    <block type="base_move_right"></block>
                                    <block type="base_move_left"></block>
                                    <block type="base_is_moving_left_0"></block>
                                    <block type="base_is_moving_left_1"></block>
                                    <block type="base_is_moving_right_0"></block>
                                    <block type="base_is_moving_right_1"></block>
                                    <block type="base_is_moving_straight_0"></block>
                                    <block type="base_is_moving_straight_1"></block>
                                    <block type="base_is_turning_left_0"></block>
                                    <block type="base_is_turning_left_1"></block>
                                    <block type="base_is_turning_right_0"></block>
                                    <block type="base_is_turning_right_1"></block>
                                    <block type="base_is_turning_0"></block>
                                    <block type="base_is_turning_1"></block>
                                </category>

                                <category name="%{BKY_MOTOR}">
                                    <block type="motor_look_floor"></block>
                                    <block type="motor_look_up"></block>
                                    <block type="motor_look_front"></block>
                                    <block type="motor_setAngleCamera"></block>
                                    <block type="motor_setAngleMotor"></block>
                                </category>

                                <category name="%{BKY_CAMERA}">
                                    <block type="camera_is_center_red_line_0"></block>
                                    <block type="camera_is_center_red_line_1"></block>
                                    <block type="camera_is_left_red_line_0"></block>
                                    <block type="camera_is_left_red_line_1"></block>
                                    <block type="camera_is_right_red_line_0"></block>
                                    <block type="camera_is_right_red_line_1"></block>
                                    <block type="camera_is_there_red_line_0"></block>
                                    <block type="camera_is_there_red_line_1"></block>
                                    <block type="camera_is_center_black_line_0"></block>
                                    <block type="camera_is_center_black_line_1"></block>
                                    <block type="camera_is_left_black_line_0"></block>
                                    <block type="camera_is_left_black_line_1"></block>
                                    <block type="camera_is_right_black_line_0"></block>
                                    <block type="camera_is_right_black_line_1"></block>
                                    <block type="camera_is_there_black_line_0"></block>
                                    <block type="camera_is_there_black_line_1"></block>
                                    <block type="camera_is_center_blue_line_0"></block>
                                    <block type="camera_is_center_blue_line_1"></block>
                                    <block type="camera_is_left_blue_line_0"></block>
                                    <block type="camera_is_left_blue_line_1"></block>
                                    <block type="camera_is_right_blue_line_0"></block>
                                    <block type="camera_is_right_blue_line_1"></block>
                                    <block type="camera_is_there_blue_line_0"></block>
                                    <block type="camera_is_there_blue_line_1"></block>
                                    <block type="camera_is_left_face_0"></block>
                                    <block type="camera_is_left_face_1"></block>
                                    <block type="camera_is_right_face_0"></block>
                                    <block type="camera_is_right_face_1"></block>
                                    <block type="camera_is_up_face_0"></block>
                                    <block type="camera_is_up_face_1"></block>
                                    <block type="camera_is_down_face_0"></block>
                                    <block type="camera_is_down_face_1"></block>
                                    <block type="camera_is_center_face_0"></block>
                                    <block type="camera_is_center_face_1"></block>
                                    <block type="camera_is_there_face_0"></block>
                                    <block type="camera_is_there_face_1"></block>
                                    <block type="camera_is_line_crossing_0"></block>
                                    <block type="camera_is_line_crossing_1"></block>
                                    <block type="camera_is_any_face_happy_0"></block>
                                    <block type="camera_is_any_face_happy_1"></block>
                                    <block type="camera_is_any_face_angry_0"></block>
                                    <block type="camera_is_any_face_angry_1"></block>
                                    <block type="camera_is_any_face_neutral_0"></block>
                                    <block type="camera_is_any_face_neutral_1"></block>
                                    <block type="camera_is_any_face_sad_0"></block>
                                    <block type="camera_is_any_face_sad_1"></block>
                                    <block type="camera_is_any_face_surprised_0"></block>
                                    <block type="camera_is_any_face_surprised_1"></block>
                                    <block type="camera_is_tag_0"></block>
                                    <block type="camera_is_tag_1"></block>
                                    <block type="camera_is_any_tag_0"></block>
                                    <block type="camera_is_any_tag_1"></block>
                                    <block type="camera_tag_on_the_left_0"></block>
                                    <block type="camera_tag_on_the_left_1"></block>
                                    <block type="camera_tag_on_the_right_0"></block>
                                    <block type="camera_tag_on_the_right_1"></block>
                                    <block type="camera_tag_on_the_center_0"></block>
                                    <block type="camera_tag_on_the_center_1"></block>
                                    <block type="camera_is_image_0"></block>
                                    <block type="camera_is_image_1"></block>
                                </category>

                                <category name="%{BKY_DISTANCES}">
                                    <block type="distances_is_front_obstacle_0"></block>
                                    <block type="distances_is_front_obstacle_1"></block>
                                    <block type="distances_is_left_obstacle_0"></block>
                                    <block type="distances_is_left_obstacle_1"></block>
                                    <block type="distances_is_right_obstacle_0"></block>
                                    <block type="distances_is_right_obstacle_1"></block>
                                    <block type="distances_is_obstacle_free_0"></block>
                                    <block type="distances_is_obstacle_free_1"></block>
                                    <block type="distances_get_min_distance_0"></block>
                                    <block type="distances_get_min_distance_1"></block>
                                </category>

                                <category name="%{BKY_GROUND}">
                                    <block type="ground_is_there_ground_0"></block>
                                    <block type="ground_is_there_ground_1"></block>
                                    <block type="ground_is_center_ground_line_0"></block>
                                    <block type="ground_is_center_ground_line_1"></block>
                                    <block type="ground_is_right_ground_line_0"></block>
                                    <block type="ground_is_right_ground_line_1"></block>
                                    <block type="ground_is_left_ground_line_0"></block>
                                    <block type="ground_is_left_ground_line_1"></block>
                                </category>

                            </div>
                        </div>

                    </div>


                </tr>
            </table>

        </tr>
    </table>



    <script>
        //Loads blocks from json definition
        var language = {{language|tojson}};
        var control = {{control|tojson}};
        loadBlocks(control, language);
        var operators = {{operators|tojson}};
        loadBlocks(operators, null);
        var values = {{values|tojson}};
        loadBlocks(values, null);
        var variables = {{variables|tojson}};
        loadBlocks(variables, null);
        var expressions = {{expressions|tojson}};
        loadBlocks(expressions, null);
        var proprioceptive = {{proprioceptive|tojson}};
        loadBlocks(proprioceptive, null);
        var motor = {{motor|tojson}};
        loadBlocks(motor, null);
        var perceptual = {{perceptual|tojson}};
        loadBlocks(perceptual, null);

        //Creates tbe workspace
        var workspace = LearnBlock.inject('learnblockDiv', {
            toolbox: document.getElementById('toolbox'),
            horizontalLayout: false,
            scrollbars: true
        });

    </script>

    <!-- Scripts Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>

</html>
